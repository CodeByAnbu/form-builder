

<div class="flex justify-between" >
  <div class="h-screen md:!w-1/2 lg:!w-1/4 px-4 py-3">
    <div class="flex justify-between items-center mb-2">
        <p class="mb-0 md:text-[12px] lg:text-[14px] font-normal">Field Groups</p>
        <div class="flex items-center">
          <!-- <div class="w-5 h-5 flex items-center justify-center bg-blue text-white text-xs font-bold rounded-full leading-none"> + </div>       -->
          <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" height="20px" viewBox="0 -960 960 960" width="20px" fill="#1F96F4"><path d="M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160Zm40 200q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>
          <button class="text-blue cursor-pointer text-[14px] font-normal" (click)="createNewForm()">Create new</button>
        </div>
    </div>
    <div class="border-b-2 border-grey mb-3"></div>
    <div>
      <div class="flex flex-col justify-between h-[calc(100vh-70px)]">
        <div class="max-h-[calc(100vh-50px)] overflow-y-auto">
          @for(form of formList; track form.name){
            <div class=" mb-2" >
              <!-- <div  class="flex items-center"  >
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#BDBDBD"><path d="M360-160q-33 0-56.5-23.5T280-240q0-33 23.5-56.5T360-320q33 0 56.5 23.5T440-240q0 33-23.5 56.5T360-160Zm240 0q-33 0-56.5-23.5T520-240q0-33 23.5-56.5T600-320q33 0 56.5 23.5T680-240q0 33-23.5 56.5T600-160ZM360-400q-33 0-56.5-23.5T280-480q0-33 23.5-56.5T360-560q33 0 56.5 23.5T440-480q0 33-23.5 56.5T360-400Zm240 0q-33 0-56.5-23.5T520-480q0-33 23.5-56.5T600-560q33 0 56.5 23.5T680-480q0 33-23.5 56.5T600-400ZM360-640q-33 0-56.5-23.5T280-720q0-33 23.5-56.5T360-800q33 0 56.5 23.5T440-720q0 33-23.5 56.5T360-640Zm240 0q-33 0-56.5-23.5T520-720q0-33 23.5-56.5T600-800q33 0 56.5 23.5T680-720q0 33-23.5 56.5T600-640Z"/></svg>
              </div> -->
              <div class="grow" >
                <div class="border-2 border-grey rounded-md px-3 py-[5px] cursor-pointer md:text-[12px] lg:text-[14px] font-normal" (click)="openForm(form)" >
                  {{ form.name + " - " + form.id }}
                </div>
              </div>
            </div>
          }
        </div>
       
        <button class="w-full text-center bg-blue text-white rounded py-2 md:text-[12px] lg:text-[14px]" (click)="previewForm()" [disabled]="currForm.length === 0 ? true : false">Preview Form</button>
      </div>
  
  </div>
  </div>

  <!-- MIDDLE PANE -->

  <div class="h-screen w-full bg-grey overflow-y-auto">
  <div class="md:w-3/4 form-section lg:container lg:w-2/4 mx-auto px-4 py-3">
 
   
      @for(formHeader of currFormHeader; track formHeader.name){
        <div class="bg-white rounded-lg mb-2">
          <div class="px-3 py-3">
            <div class="flex justify-between mb-1">
              <div class="md:text-[12px] lg:text-[14px]">{{ formHeader.name}}</div>
              
              <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" (click)="openDrawer(formHeader)" class="md:w-[18px] lg:w-[24px] md:h-[18px] lg:h-[24px] mr-2 cursor-pointer" viewBox="0 -960 960 960" fill="#BDBDBD"><path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/></svg>
                <!-- <svg xmlns="http://www.w3.org/2000/svg" height="24px" class="mr-2 cursor-pointer" viewBox="0 -960 960 960" width="24px" fill="#BDBDBD"><path d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"/></svg> -->
                <svg xmlns="http://www.w3.org/2000/svg" (click)="deleteForm(formHeader)" class="md:w-[18px] lg:w-[24px] md:h-[18px] lg:h-[24px] mr-2 cursor-pointer" viewBox="0 -960 960 960"  fill="#BDBDBD"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg>
              </div>
            </div>
            <p class="text-dark-grey mb-4 md:text-[12px] lg:text-[14px]">{{ formHeader.description }}</p>
          </div>
        </div>
      }
        <div
        cdkDropList
        #formPane="cdkDropList"
        [cdkDropListData]="currForm"
        (cdkDropListDropped)="drop($event)">
        @if(currForm.length === 0 && currFormHeader.length > 0){
          <div class="border-dashed border border-black w-full h-16 px-3 py-4 text-center md:text-[12px] lg:text-[14px]">
            Drop inputs here to build form
          </div>
          }
        @for(field of currForm; track field; let i = $index) {

          
          <div class="flex bg-white rounded-lg mb-2 cursor-move ">
            <div class="flex items-center cursor-move" *cdkDragPlaceholder>
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#BDBDBD"><path d="M360-160q-33 0-56.5-23.5T280-240q0-33 23.5-56.5T360-320q33 0 56.5 23.5T440-240q0 33-23.5 56.5T360-160Zm240 0q-33 0-56.5-23.5T520-240q0-33 23.5-56.5T600-320q33 0 56.5 23.5T680-240q0 33-23.5 56.5T600-160ZM360-400q-33 0-56.5-23.5T280-480q0-33 23.5-56.5T360-560q33 0 56.5 23.5T440-480q0 33-23.5 56.5T360-400Zm240 0q-33 0-56.5-23.5T520-480q0-33 23.5-56.5T600-560q33 0 56.5 23.5T680-480q0 33-23.5 56.5T600-400ZM360-640q-33 0-56.5-23.5T280-720q0-33 23.5-56.5T360-800q33 0 56.5 23.5T440-720q0 33-23.5 56.5T360-640Zm240 0q-33 0-56.5-23.5T520-720q0-33 23.5-56.5T600-800q33 0 56.5 23.5T680-720q0 33-23.5 56.5T600-640Z"/></svg>
            </div>
            <div class="grow">
              <div cdkDrag class="px-3 py-3 bg-white  ">
                <div class="flex justify-between">
                  <div class="md:text-[12px] lg:text-[14px]">
                    {{field.label}}
                  </div>
                  
                  <div class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" (click)="openDrawer(field)"  class="md:w-[18px] lg:w-[24px] md:h-[18px] lg:h-[24px] mr-2 cursor-pointer" viewBox="0 -960 960 960"  fill="#BDBDBD"><path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/></svg>
                    <!-- <svg xmlns="http://www.w3.org/2000/svg" height="24px" class="mr-2 cursor-pointer" viewBox="0 -960 960 960" width="24px" fill="#BDBDBD"><path d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"/></svg> -->
                    <svg xmlns="http://www.w3.org/2000/svg" (click)="deleteField(i)" class="md:w-[18px] lg:w-[24px] md:h-[18px] lg:h-[24px] mr-2 cursor-pointer" viewBox="0 -960 960 960"  fill="#BDBDBD"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg>
                  </div>
                </div>
                
                <p class="italic text-dark-grey mb-4 md:text-[12px] lg:text-[14px]">{{ field.description }}</p>
                <div class="mb-0">
                  @if(field.type === 'text' || field.type === 'number' || field.type === 'email' || field.type === 'password'){
                    <input [type]="field.type" class="w-full border p-2 rounded md:text-[12px] lg:text-[14px]">
                  }
                  @if(field.type === 'textarea'){
                  <textarea class="w-full border p-2 rounded md:text-[12px] lg:text-[14px]"></textarea>
                  }
                  @if(field.type === 'date'){
                    <input type="date" class="w-full border p-2 rounded md:text-[12px] lg:text-[14px]">
                  }
                  @if(field.type === 'select'){
                    <dropdown [options]="SampleOption"></dropdown>
                  }
                  @if(field.type === 'time'){
                    <div class="ngx-timepicker-field-example md:text-[12px] lg:text-[14px]">
                      <ngx-timepicker-field [defaultTime]="'11:00 am'" [minutesGap]="5" [disabled]="true"></ngx-timepicker-field>
                    </div>
                  }
                  @if(field.type === 'Date & time'){
                    <div class="flex justify-around md:flex-col xl:flex-row">
                      <input type="date" class="w-full border p-2 rounded md:mb-2 xl:mb-0">
                      <div class="ngx-timepicker-field-example">
                        <ngx-timepicker-field [defaultTime]="'11:00 am'" [minutesGap]="5" [disabled]="true"></ngx-timepicker-field>
                      </div>
                      
                    </div>
                   
                  }
                  @if(field.type === 'checkbox'){
                    <div class="flex">
                      <div class="flex items-center mr-3"> 
                        <input type="checkbox" class="mr-2 cursor-pointer">
                        <p class="mb-0 md:text-[12px] lg:text-[14px]">Sample Option</p>
                      </div>
                      <div class="flex items-center">
                        <input type="checkbox" class="mr-2 cursor-pointer">
                        <p class="mb-0 md:text-[12px] lg:text-[14px]">Sample Option</p>
                      </div>
                     
                    </div>
                  }
                  @if(field.type === 'radio'){
                    <div class="flex items-center">
                      <input type="radio" class="mr-2 cursor-pointer">
                      <p class="mb-0 md:text-[12px] lg:text-[14px]">Sample Option</p>
                    </div>      
                  }
                  @if(field.type === 'upload'){
                    <media-upload></media-upload>
                  }
                </div>
              </div>
            </div>
          </div>
       

        }
      </div>
    <!-- } -->
 
  
  </div>
</div>

@if(isDrawerOpen){
<app-drawer (closeDrawerEvent)="closeDrawer()" (formPropsEvent)="getDrawerFormProps($event)" [currField]="selectedInput" [isPreviewForm]="isPreviewForm" [currForm]="currForm"></app-drawer>
}

  <!-- RIGHT PANE -->

  <div class="tool-section h-screen px-4 py-3">
    <p class="mb-0 text-[14px] font-semibold">Elements</p>
    <div class="relative">
      <input type="text" placeholder="Search" 
          class="w-64 pl-10 pr-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" (input)="searchFields($event)">
      <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" 
          xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" 
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
  </div>
  @if(formFields.length === 0){
    <p class="text-center mt-3 md:text-[12px] lg:text-[14px]">No Results Found</p>
  }
    <div cdkDropList class="example-list"  [cdkDropListData]="formFields" [cdkDropListConnectedTo]="[formPane]">
      @for (fieldList of formFields; track fieldList.name) {
        <div class="my-2 md:text-[10px] lg:text-[11px] font-semibold text-gray-500">{{fieldList.name | uppercase}}</div>
        @for(field of fieldList.fields; track field.type){
        <div class="border border-1 rounded px-3 py-2 cursor-move mb-2 font-normal md:text-[11px] lg:text-[13px]" cdkDrag [cdkDragData]="field">
          <div class="example-custom-placeholder md:text-[11px] lg:text-[12px]" *cdkDragPlaceholder></div>
          {{field.heading}}
        </div>
      }
      }
    </div>
  </div>
</div>

